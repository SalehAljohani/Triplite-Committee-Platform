<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>@ViewData["Title"] - Triplite Committee Platform</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" rel="application/javascript">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <script src="https://kit.fontawesome.com/0fc1c09fcd.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pixeden-stroke-7-icon@1.2.3/pe-icon-7-stroke/dist/pe-icon-7-stroke.min.css">
    <link href="~/css/site.css" rel="stylesheet" />

</head>
<body>
    <aside id="left-panel" class="left-panel">
        <nav class="navbar navbar-expand-sm navbar-default">
            <div id="main-menu" class="main-menu collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li>
                        <a asp-area="" asp-controller="Home" asp-action="Index" class="nav-link"><i class="menu-icon fa fa-home"></i>Home </a>
                    </li>
                    <li class="menu-title">Search</li>
                    <li>
                        <a asp-area="" asp-controller="Search" asp-action="Index" class="nav-link"><i class="menu-icon fa fa-search"></i>Advanced Search </a>
                    </li>
                    <li class="menu-title">Boards</li>
                    <li class="menu-item-has-children dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="menu-icon fa-solid fa-folder"></i>Boards </a>
                        <ul class="sub-menu children dropdown-menu">
                            <li>
                                <i class="fa-solid fa-file"></i>
                                <a asp-area="" asp-controller="Board" asp-action="Index" class="nav-link">Previous Boards </a>
                            </li>
                            @if (ViewBag.ActiveRole == "College Dean" || ViewBag.ActiveRole == "Vice Dean")
                            {
                                    <li>
                                        <i class="fa-solid fa-file-import"></i>
                                        <a asp-area="" asp-controller="Home" asp-action="Index" class="nav-link">Current Boards</a>
                                    </li>
                            }
                            @if (ViewBag.ActiveRole == "Department Head" || ViewBag.ActiveRole == "Department Member")
                            {
                                    <li>
                                        <i class="fa-solid fa-file-import"></i>
                                        <a asp-area="" asp-controller="Home" asp-action="Index" class="nav-link">Current Boards</a>
                                    </li>
                            }
                        </ul>
                    </li>
                    @if (ViewBag.ActiveRole == "Admin")
                    {
                            <li class="menu-title">Statistics</li>
                            <li>
                                <a asp-area="" asp-controller="Home" asp-action="Index" class="nav-link"><i class="menu-icon fa fa-bar-chart-o"></i>Statistics </a>
                            </li>
                            <li class="menu-title">Manage</li>
                            <li class="menu-item-has-children dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="menu-icon fa-solid fa-id-card"></i>Users & Roles </a>
                                <ul class="sub-menu children dropdown-menu">
                                    <li>
                                        <i class="fa-solid fa-users"></i><a asp-area="" asp-controller="Account" asp-action="Index" class="nav-link ">Accounts </a>
                                    </li>
                                    <li>
                                        <i class="fa-solid fa-user-gear"></i><a asp-area="" asp-controller="Role" asp-action="Index" class="nav-link">Manage Roles </a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <a asp-area="" asp-controller="College" asp-action="Index" class="nav-link"><i class="menu-icon fa-solid fa-building-columns"></i>College & Department</a>
                            </li>
                            <li>
                                <a asp-area="" asp-controller="Home" asp-action="Index" class="nav-link"><i class="menu-icon fa fa-file-text"></i>Boards & Reasons</a>
                            </li>
                            <li>
                                <a asp-area="" asp-controller="Support" asp-action="Index" class="nav-link"><i class="menu-icon fas fa-headset"></i>Support Requests</a>
                            </li>
                            <li class="menu-title">Manage Site</li>
                            <li>
                                <a asp-area="" asp-controller="Announcement" asp-action="Index" class="nav-link"><i class="menu-icon fa-solid fa-bullhorn"></i>Announcement</a>
                            </li>
                            <li>
                                <a asp-area="" asp-controller="SupportDetail" asp-action="Index" class="nav-link"><i class="menu-icon fa-solid fa-pen-to-square"></i>Support Details</a>
                            </li>
                    }
                    @if (ViewBag.DisplayRoleChange == true)
                    {
                            <li class="menu-title">Change Role</li>
                            <li>
                                <a asp-area="" asp-controller="ChooseRole" asp-action="Index" class="nav-link mb-5"><i class="menu-icon fa-solid fa-arrow-right-arrow-left"></i>Change Role</a>
                            </li>
                    }
                </ul>
            </div>
        </nav>
    </aside>
    <div id="right-panel" class="right-panel">
        <header id="header" class="header">
            <div class="top-left">
                <div class="navbar-header">
                    <a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index"><img src="~/img/TLogo.png" alt="Taibah University" width="30px" height="38px"></a>
                    <a id="menuToggle" class="menutoggle"><i class="fa fa-bars"></i></a>
                </div>

            </div>
            <div class="top-right">
                <div class="header-menu">
                    <partial name="_LoginPartial" />
                </div>
            </div>
        </header>
        <div class="content">
            <div class="animated fadeIn">
                <main role="main">
                    @RenderBody()
                </main>
            </div>
        </div>
        <div class="clearfix"></div>
        <footer class="site-footer">
            <div class="footer-inner text-center">
                <span class="">Triplite Committee Platform Development Team &copy; <script>document.write(new Date().getFullYear())</script></span> <span class="fs-5">-</span> <span class="ps-3">Taibah University</span>
            </div>
        </footer>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/jquery@2.2.4/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.4/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-match-height@0.7.2/dist/jquery.matchHeight.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)

    <script>

        var currentPageUrl = window.location.href;

        var navLinks = document.querySelectorAll('.nav-link');

        navLinks.forEach(function (navLink) {
            if (navLink.href === currentPageUrl) {
                var parentLi = navLink.closest('.menu-item-has-children');
                if (parentLi) {
                    parentLi.classList.add('active');
                } else {
                    navLink.parentElement.classList.add('active');
                    navLink.classList.add('active');
                }
            }
        });
    </script>
</body>
</html>